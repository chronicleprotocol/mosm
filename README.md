# mosm
Combined Median and OSM smart contract.

## Getting started

To build the contract from source do

```
make all
```

In a separate terminal window, you'll want to get a testchain running:

```
dapp testnet --accounts 13
```

will start a local testnet with 13 accounts that will be used for feeds. Export all the `ETH_*` vars, e.g. `ETH_FROM`, `ETH_KEYSTORE`, etc into your environment.

Then, do

```
dapp create MosmETHUSD
```

to deploy the included ETHUSD contract. Now you're ready to test. Do

```
./test_median.sh ETHUSD <MOSM_ADDRESS_from_dapp_create_above>
```

The above will exercise the **Median** side of the contract, and set a current Median price. Now you are ready to test the **OSM** side of things. Do

```
./test_osm.sh <MOSM_ADDRESS_from_dapp_create_above>
```

And the end result is that when you call `osm_poke()` followed by `osm_peek()` the OSM reflects the same value that was generated by `test_median.sh`.


